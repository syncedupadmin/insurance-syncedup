<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Critical Theme Flash Prevention -->
    <script>
    (function(){
        var t=localStorage.getItem("agentTheme")||"professional";
        var h=document.documentElement;
        h.classList.add(t+"-mode");

        // Load theme CSS immediately
        var existingTheme = document.querySelector('link[data-theme-css]');
        if(existingTheme) existingTheme.remove();

        if(t==="modern"){
            // Load modern base styles (structure only)
            var baseLink = document.createElement('link');
            baseLink.rel = 'stylesheet';
            baseLink.href = '/css/themes/modern-base.css';
            baseLink.setAttribute('data-theme-css', 'modern-base');
            document.head.appendChild(baseLink);
            // Agent portal green colors are in agent-global.css
        } else {
            // Load traditional theme CSS
            var link = document.createElement('link');
            link.rel = 'stylesheet';
            link.href = '/css/themes/' + t + '.css';
            link.setAttribute('data-theme-css', t);
            document.head.appendChild(link);
        }

        // Add body class when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            if(document.body) {document.body.classList.add("portal-agent");document.body.classList.add(t+"-mode");}
        });

        // Set background for immediate visual feedback
        if(t==="classic"){h.style.background="linear-gradient(-45deg,#047857,#059669,#10b981,#34d399)";}
        else if(t==="modern"){h.style.background="linear-gradient(135deg,#10b981 0%,#059669 100%)";}
        else if(t==="professional"){h.style.background="linear-gradient(-45deg,#059669,#10b981,#34d399,#a7f3d0)";}
        else{h.style.background="linear-gradient(-45deg,#059669,#10b981,#34d399,#a7f3d0)";}
    })();
    </script>
    <!-- Theme initialization fallback -->
    <script src="/_agent/components/theme-init.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customers - SyncedUp Insurance</title>

    <!-- Preconnect to external domains for faster loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://unpkg.com">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Critical CSS - Load immediately to prevent flash -->
    <link rel="stylesheet" href="/_agent/agent-global.css">

    <!-- Agent Portal Theme Override -->
    <link rel="stylesheet" href="/css/themes/agent-modern.css">

    <!-- Removed inline styles - using theme system styles from agent-global.css -->
    <!-- Portal API Shim - Must load before dashboard scripts -->
    <script src="/js/portal-api.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

    <!-- Load auth helper for user context -->
    <!-- Load theme system first -->
    <script src="/js/theme-switcher.js"></script>
    <!-- Load role switcher if available -->
    <script src="/js/role-switcher.js"></script>
    <!-- Load navigation component -->
    <script src="/_agent/components/navigation.js"></script>
    <!-- Load global header component -->
    <script src="/_agent/components/global-header.js"></script>
    <script src="/js/auth-check.js" defer></script>
    <link rel="stylesheet" href="/css/hide-theme-switchers.css">
</head>
<body class="portal-agent">
    <!-- Global Header Mount Point -->
    <div id="global-header-mount"></div>

    <!-- Initialize Global Header -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            AgentHeader.init({
                pageTitle: 'Customers',
                showRoleSwitcher: true,
                showUserDisplay: true
            });
            lucide.createIcons();
        });
    </script>
    <div class="container">
        <div class="card">
            <h2>Customers Management</h2>
            <p>This feature will be connected to the backend API.</p>
        </div>
    </div>
    
    <!-- Theme system already loaded in head - no duplicate loading needed -->

</body>
</html>
